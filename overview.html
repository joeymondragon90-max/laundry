<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Dry Zone Cantilan — Overview</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #53629E;
            --secondary: #473472;
            --accent: #87BAC3;
            --light: #D6F4ED;
            --dark: #473472;
            --mid-dark: #53629E;
            --medium: #87BAC3;
            --warning: #f59e0b;
            --danger: #ef4444;
            --card-bg: #ffffff;
            --card-accent: #87BAC3;
            --card-hover: #D6F4ED;
            --text-light: #53629E;
            --gradient-1: linear-gradient(135deg, #473472 0%, #53629E 100%);
            --gradient-2: linear-gradient(135deg, #53629E 0%, #87BAC3 100%);
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        html { scroll-behavior: smooth; }
        body { background-color: var(--light); color: var(--dark); line-height: 1.6; overflow-x: hidden; }

        .container { width: 100%; max-width: 1300px; margin: 0 auto; padding: 0 15px; }

        .container-header {
            max-width: 1300px;
            padding-left: 0 !important;
        }

        /* Header */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            color: var(--dark);
            box-shadow: var(--shadow-md);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            padding: 14px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo h1 {
            font-size: 1.6rem;
            font-weight: 700;
            margin-left: 3px;
            letter-spacing: 1px;
            color: var(--primary);
        }

        .logo img {
            height: 64px;
            width: auto;
            margin-right: 12px;
            width: 100%;
            max-width: 64px;
            height: auto;
        }

        .nav-flex {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 0;
        }

        .nav-links li {
            padding: 0;
            margin: 0 2px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--medium);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 7px;
            transition: background 0.3s, color 0.3s;
            padding: 8px 14px;
            border-radius: 16px;
            font-size: 1rem;
            background: transparent;
        }

        .nav-links a:hover {
            background: var(--accent);
            color: white;
        }

        .nav-disabled {
            color: var(--text-light);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 7px;
            padding: 8px 14px;
            border-radius: 16px;
            font-size: 1rem;
            background: transparent;
            opacity: 0.6;
            cursor: not-allowed;
        }

        .auth-buttons {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-left: auto;
            margin-right: 20px;
        }

        .header-register-btn, .header-login-btn {
            padding: 10px 18px;
            border-radius: 8px;
            font-weight: bold;
            color: #fff;
            border: none;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            box-shadow: var(--shadow-md);
        }

        .header-register-btn {
            background: var(--gradient-1);
        }

        .header-register-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .header-login-btn {
            background: var(--gradient-1);
        }

        .header-login-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }


        .hero-section {
            background: var(--gradient-1);
            color: white;
            padding: 100px 0;
            text-align: center;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at top right, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .hero-content { max-width: 900px; margin: 0 auto; padding: 20px; position: relative; z-index: 1; }
        .hero-title { font-size: 2.8rem; color: white; margin-bottom: 12px; letter-spacing: -1px; font-weight: 800; }
        .hero-subtitle { font-size: 1.15rem; color: rgba(255,255,255,0.95); margin-bottom: 30px; font-weight: 500; }
        .btn { display: inline-block; padding: 12px 28px; background: var(--gradient-2); color: white; border-radius: 8px; text-decoration: none; font-weight: 700; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); font-size: 0.95rem; letter-spacing: 0.5px; box-shadow: var(--shadow-lg); }
        .btn:hover { transform: translateY(-3px); box-shadow: var(--shadow-xl); }

        .section { padding: 70px 0; }
        .section-title { text-align: center; margin: 0 0 40px; color: var(--dark); position: relative; font-size: 2rem; font-weight: 800; letter-spacing: -0.5px; }
        .section-title::after { content: ''; display: block; width: 60px; height: 4px; background: var(--gradient-1); border-radius: 2px; margin: 12px auto 0; }

        .overview-section { background: transparent; }
        .overview-content { display: grid; grid-template-columns: 1fr 1fr; gap: 36px; align-items: center; max-width: 1100px; margin: 0 auto; }
        .overview-image { border-radius: 12px; overflow: hidden; background: white; box-shadow: var(--shadow-lg); }
        .overview-image img { width: 100%; height: auto; display: block; object-fit: cover; transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .overview-image:hover img { transform: scale(1.05); }

        .overview-text { font-size: 1rem; color: var(--text-light); background: transparent; padding: 6px 2px; }
        .overview-text p { margin-bottom: 1rem; color: var(--text-light); text-align: justify; text-justify: inter-word; }

        .rating-section { padding-top: 10px; padding-bottom: 60px; }
        .rating-rows { display:flex; flex-direction:column; gap:28px; max-width: 1100px; margin: 0 auto; }
        .rating-row { display:flex; gap:0; align-items: stretch; background: white; border-radius: 12px; overflow: hidden; box-shadow: var(--shadow-md); border: 1px solid rgba(0,0,0,0.06); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .rating-row:hover { box-shadow: var(--shadow-lg); }
        .rating-image { flex: 0 0 40%; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); display:flex; align-items:center; justify-content:center; padding: 18px; }
        .rating-image img { width: 100%; height: auto; object-fit:cover; border-radius: 6px; }
        .rating-form { flex:1; padding: 22px; display:flex; flex-direction:column; gap:8px; }
        .question-number { color: var(--primary); font-weight:700; font-size:0.95rem; }
        .card-title { color: var(--dark); font-size:1.15rem; margin-bottom:6px; font-weight: 700; }

        .exit-factors-section { background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding-bottom: 50px; }
        .factors-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; max-width: 1100px; margin: 0 auto; }
        .factor-card { background: white; border-radius: 12px; padding: 28px; text-align:center; box-shadow: var(--shadow-md); border: 1px solid rgba(0,0,0,0.05); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .factor-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); }
        .factor-icon { font-size: 2.2rem; color: var(--primary); margin-bottom:12px; }
        .factor-title { font-weight:700; color: var(--dark); margin-bottom:8px; }

        footer {
            background: var(--dark);
            color: #fff;
            padding: 35px 0 18px;
            margin-top: 30px;
        }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(210px, 1fr)); gap: 20px; max-width: 1100px; margin: 0 auto 12px; padding: 0 15px; }
        .footer-section h3 { margin-bottom: 12px; font-size: 1.05rem; color: #fff; }
        .footer-section p, .footer-section li { color: #dfeff2; font-size: 0.95rem; opacity: 0.95; line-height: 1.5; }
        .footer-section ul { list-style: none; padding: 0; margin: 0; }
        .footer-section a { color: #d8eef0; text-decoration: none; display:inline-block; margin-bottom:6px; transition: color .2s; }
        .footer-section a:hover { color: var(--secondary); }
        .social-links { display:flex; gap:10px; margin-top:8px; }
        .social-links a { display:inline-block; width:36px; height:36px; background: rgba(255,255,255,0.06); border-radius:50%; color:#fff; text-align:center; line-height:36px; transition: background .2s; }
        .social-links a:hover { background: var(--primary); color: #fff; }
        .copyright { text-align:center; padding-top:12px; border-top: 1px solid rgba(255,255,255,0.05); font-size:0.92rem; color: #cfe6e8; opacity:0.9; }

        /* Modal styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.45);
            z-index: 2000;
            padding: 20px;
        }
        .modal {
            width: 100%;
            max-width: 420px;
            background: #fff;
            border-radius: 14px;
            padding: 26px 20px;
            box-shadow: 0 10px 40px rgba(3,23,22,0.25);
            border: 1.5px solid #e4eef1;
            position: relative;
        }
        .modal h2 {
            margin: 0 0 12px;
            color: var(--primary);
            text-align: center;
        }
        .modal .close-btn {
            position: absolute;
            right: 12px;
            top: 10px;
            background: transparent;
            border: none;
            font-size: 22px;
            color: #666;
            cursor: pointer;
        }
        .modal .close-btn:hover {
            color: var(--danger);
        }
        .form-group {
            margin-bottom: 14px;
        }
        .form-group input[type="text"], .form-group input[type="email"], .form-group input[type="password"] {
            width: 100%;
            padding: 10px 12px;
            border: 1.2px solid #cfd8dc;
            border-radius: 6px;
            background: var(--light);
            font-size: 1rem;
            outline: none;
            transition: border .15s;
        }
        .form-group input:focus {
            border-color: var(--primary);
        }
        .form-submit {
            width: 100%;
            padding: 11px;
            background: var(--primary);
            color: #fff;
            border: none;
            border-radius: 22px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: background .25s;
        }
        .form-submit:hover {
            background: var(--secondary);
        }
        .modal-link {
            display: block;
            margin-top: 8px;
            text-align: right;
            font-size: .97rem;
        }
        .modal-link a {
            color: var(--primary);
            text-decoration: underline;
        }
        .modal .alert {
            padding: 10px 12px;
            border-radius: 8px;
            margin-bottom: 12px;
        }
        .alert-success {
            background: #e6fbf9;
            color: #036b66;
            border: 1px solid rgba(3,107,102,0.08);
        }
        .alert-danger {
            background: #fff1f1;
            color: #7a1a19;
            border: 1px solid rgba(231,76,60,0.06);
        }

        @media (max-width: 992px) {
            .overview-content { grid-template-columns: 1fr; gap: 22px; }
            .factors-grid { grid-template-columns: repeat(2, 1fr); }
            .rating-row { flex-direction: column; }
            .rating-image { flex-basis: auto; width:100%; padding: 12px; }
        }
        @media (max-width: 768px) {
            .header-row {
                flex-direction: column;
                gap: 15px;
            }
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            .auth-buttons {
                flex-direction: column;
                width: 100%;
                gap: 10px;
                margin-left: 0;
            }
            .header-register-btn, .header-login-btn {
                width: 100%;
                margin: 2px 0;
            }
        }

        @media (max-width: 600px) {
            .hero-title { font-size: 1.6rem; }
            .hero-subtitle { font-size: 0.98rem; }
            .section { padding: 40px 0; }
            .factors-grid { grid-template-columns: 1fr; }
            .footer-content { grid-template-columns: 1fr; text-align:left; }
            .header-register-btn, .header-login-btn {
                font-size: 0.8rem;
                padding: 6px 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container container-header header-row">
            <div class="logo" style="margin-left:24px;">
                <a href="Dry Zone Logo.jpg" class="photo-link" id="shopLogoLink">
                    <img src="Dry Zone Logo.jpg" alt="Dry Zone Cantilan Logo" style="height:64px;width:auto;margin-right:12px;" id="shopLogo">
                </a>
                <h1>Dry Zone - Cantilan</h1>
            </div>
            <div class="nav-flex">
                <div class="auth-buttons">
                    <button class="header-register-btn" id="headerRegisterBtn" type="button"><i class="fas fa-user-plus"></i> Register</button>
                    <button class="header-login-btn" id="headerLoginBtn" type="button"><i class="fas fa-user"></i> Log In</button>
                </div>
            </div>
        </div>
    </header>


    <section class="hero-section">
        <div class="container hero-content">
            <h1 class="hero-title">DRY ZONE CANTILAN</h1>
            <p class="hero-subtitle">A local platform connecting residents and students with trusted laundry services — quick bookings, reliable partners.</p>
            <a class="btn" href="#overview">Read Overview</a>
        </div>
    </section>

    <!-- Overview -->
    <section id="overview" class="section overview-section">
        <div class="container">
            <h2 class="section-title">Overview</h2>
            <div class="overview-content">
                <div class="overview-text">
                    <p>Dry Zone Cantilan is a comprehensive online platform designed to transform the laundry experience for residents and students in Cantilan. We serve as the central hub connecting customers with trusted local laundry services, eliminating the time-consuming process of searching for reliable providers. Our mission is to simplify daily life by offering a seamless, one-stop solution where users can easily browse, compare, and book laundry services that fit their specific needs and schedules.</p>

                    <p>Through our intuitive platform, customers can access detailed profiles of partner laundry shops, complete with service offerings, pricing, operating hours, and genuine customer reviews. We've partnered with the most reliable laundry establishments in Cantilan to ensure quality service, while our integrated booking system allows for convenient scheduling of pick-up and delivery services. Whether you're a busy professional, a student with limited time, or a family managing household chores, Dry Zone Cantilan provides the convenience of having fresh, clean clothes without the hassle of traditional laundry errands.</p>

                    <p>Beyond convenience, we're committed to supporting local businesses and fostering economic growth within our community. By connecting customers with neighborhood laundry services, we help these businesses reach more clients while providing residents with access to quality, affordable laundry solutions. Dry Zone Cantilan represents our dedication to making everyday tasks easier, saving you valuable time, and contributing to a better work-life balance for everyone in our community.</p>
                </div>

                <div class="overview-image" aria-hidden="true">
                    <img src="cantilan.jpg" alt="Laundry and community">
                </div>
            </div>
        </div>
    </section>

    <section class="section rating-section">
        <div class="container">
            <h2 class="section-title">Frequently Asked Questions</h2>
            <div class="rating-rows">
                <div class="rating-row">
                    <div class="rating-image">
                        <img src="https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Laundry Service">
                    </div>
                    <div class="rating-form">
                        <span class="question-number">QUESTION #1</span>
                        <h3 class="card-title">How can I choose the best laundry shop for my needs?</h3>
                        <div class="faq-answer">Our platform allows you to browse shop profiles, compare services offered, check customer ratings, and read reviews. You can filter by location, pricing, service types, and operating hours to find the perfect match for your laundry requirements.</div>
                    </div>
                </div>

                <div class="rating-row">
                    <div class="rating-image">
                        <img src="purpose.webp" alt="Laundry Service">
                    </div>
                    <div class="rating-form">
                        <span class="question-number">QUESTION #2</span>
                        <h3 class="card-title">What is the purpose of Dry Zone Cantilan?</h3>
                        <div class="faq-answer">Dry Zone Cantilan connects residents and students in Cantilan with reliable laundry services. Our platform makes it easy to find, compare, and book laundry services that fit your schedule and budget, saving you time and effort.</div>
                    </div>
                </div>

                <div class="rating-row">
                    <div class="rating-image">
                        <img src="offers.jpg" alt="Laundry Service">
                    </div>
                    <div class="rating-form">
                        <span class="question-number">QUESTION #3</span>
                        <h3 class="card-title">What special services do Cantilan laundry shops offer?</h3>
                        <div class="faq-answer">Many of our partner shops provide pickup and delivery services, use eco-friendly detergents, offer express same-day service, and provide special care for delicate items. Some also offer bulk discounts for students and regular customers.</div>
                    </div>
                </div>

                <div class="rating-row">
                    <div class="rating-image">
                        <img src="booking.jpg" alt="Laundry Service">
                    </div>
                    <div class="rating-form">
                        <span class="question-number">QUESTION #4</span>
                        <h3 class="card-title">How does the online booking system work?</h3>
                        <div class="faq-answer">Simply select your preferred laundry shop, choose your services (washing, drying, folding, ironing), schedule a pickup time, and confirm your booking. You'll receive notifications about your order status and can track it through our platform.</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Why Choose Us -->
    <section class="section exit-factors-section">
        <div class="container">
            <h2 class="section-title">Why Choose Us?</h2>
            <div class="factors-grid">
                <div class="factor-card">
                    <div class="factor-icon"><i class="fas fa-dollar-sign"></i></div>
                    <h3 class="factor-title">Affordable Pricing</h3>
                    <p>Competitive rates that deliver exceptional value for quality laundry services.</p>
                </div>
                <div class="factor-card">
                    <div class="factor-icon"><i class="fas fa-headset"></i></div>
                    <h3 class="factor-title">Responsive Support</h3>
                    <p>Our dedicated team is always ready to assist with your laundry needs.</p>
                </div>
                <div class="factor-card">
                    <div class="factor-icon"><i class="fas fa-cogs"></i></div>
                    <h3 class="factor-title">Premium Services</h3>
                    <p>Comprehensive laundry solutions from washing to dry cleaning and express service.</p>
                </div>
                <div class="factor-card">
                    <div class="factor-icon"><i class="fas fa-user-friends"></i></div>
                    <h3 class="factor-title">Trusted Partners</h3>
                    <p>Connect with the most reliable laundry shops in Cantilan, Surigao del Sur.</p>
                </div>
                <div class="factor-card">
                    <div class="factor-icon"><i class="fas fa-chart-line"></i></div>
                    <h3 class="factor-title">Easy Growth</h3>
                    <p>Scale your laundry business with our seamless booking and management platform.</p>
                </div>
                <div class="factor-card">
                    <div class="factor-icon"><i class="fas fa-lightbulb"></i></div>
                    <h3 class="factor-title">Innovation</h3>
                    <p>Modern features like real-time chat, order tracking, and advanced search filters.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Dry Zone Cantilan</h3>
                <p>Dry Zone Cantilan connects the local community with trusted laundry services — fast booking, reliable partners, and quality care for your garments.</p>
            </div>

            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#faq">FAQ</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>Contact</h3>
                <p>Email: hello@dryzonecantilan.local</p>
                <p>Phone: +63 912 345 6789</p>
                <div class="social-links" aria-hidden="true">
                    <a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="copyright">
                &copy; 2025 Dry Zone Cantilan. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Register Modal -->
    <div id="registerModal" class="modal-overlay" aria-hidden="true" role="dialog" aria-labelledby="registerTitle">
        <div class="modal" role="document">
            <button class="close-btn" data-close>&times;</button>
            <h2 id="registerTitle">Register</h2>

            <div id="registerMessages" aria-live="polite"></div>

            <form id="registerForm" action="register.php" method="post" autocomplete="off">
                <div class="form-group"><input name="full_name" type="text" placeholder="Full Name" required></div>
                <div class="form-group"><input name="email" type="email" placeholder="Email" required></div>
                <div class="form-group"><input name="password" type="password" placeholder="Password" required></div>
                <div class="form-group"><input name="repeat_password" type="password" placeholder="Repeat Password" required></div>
                <div class="form-group">
                    <select name="role" required style="width: 100%; padding: 10px 12px; border: 1.2px solid #cfd8dc; border-radius: 6px; background: var(--light); font-size: 1rem; outline: none;">
                        <option value="customer">Customer</option>
                        <option value="seller">Seller</option>
                    </select>
                </div>

                <input type="hidden" name="from_modal" value="1">
                <button type="submit" class="form-submit">Register</button>

                <div class="modal-link"><a href="#" id="openLoginFromRegister">Already have an account? Log In</a></div>
            </form>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal-overlay" aria-hidden="true" role="dialog" aria-labelledby="loginTitle">
        <div class="modal" role="document">
            <button class="close-btn" data-close>&times;</button>
            <h2 id="loginTitle">Log In</h2>

            <div id="loginMessages" aria-live="polite"></div>

            <form id="loginForm" action="login.php" method="post" autocomplete="off">
                <div class="form-group"><input name="email" type="email" placeholder="Email" required></div>
                <div class="form-group"><input name="password" type="password" placeholder="Password" required></div>

                <input type="hidden" name="from_modal" value="1">
                <button type="submit" class="form-submit">Log In</button>

                <div class="modal-link"><a href="#" id="openRegisterFromLogin">Don't have an account? Register</a></div>
            </form>
        </div>
    </div>

    <script>
        // Smooth scrolling for anchors
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const targetId = this.getAttribute('href');
                if (!targetId || targetId === '#') return;
                e.preventDefault();
                const targetEl = document.querySelector(targetId);
                if (!targetEl) return;
                const offset = Math.max(0, targetEl.getBoundingClientRect().top + window.pageYOffset - 60);
                window.scrollTo({ top: offset, behavior: 'smooth' });
            });
        });

        // Modal functionality
        const registerModal = document.getElementById('registerModal');
        const loginModal = document.getElementById('loginModal');
        const headerRegisterBtn = document.getElementById('headerRegisterBtn');
        const headerLoginBtn = document.getElementById('headerLoginBtn');

        function openModal(modal) {
            modal.style.display = 'flex';
            modal.setAttribute('aria-hidden', 'false');
            const first = modal.querySelector('input');
            if (first) first.focus();
        }

        function closeModal(modal) {
            modal.style.display = 'none';
            modal.setAttribute('aria-hidden', 'true');
        }

        // Connect header buttons to modals
        headerRegisterBtn.addEventListener('click', () => openModal(registerModal));
        headerLoginBtn.addEventListener('click', () => openModal(loginModal));

        // Close buttons
        document.querySelectorAll('.modal .close-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const modal = btn.closest('.modal-overlay');
                if (modal) closeModal(modal);
            });
        });

        // Close on overlay click
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) closeModal(overlay);
            });
        });

        // Keyboard: Esc closes any open modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay[aria-hidden="false"]').forEach(m => closeModal(m));
            }
        });

        // Switch links between modals
        document.getElementById('openLoginFromRegister').addEventListener('click', (e) => {
            e.preventDefault();
            closeModal(registerModal);
            openModal(loginModal);
        });
        document.getElementById('openRegisterFromLogin').addEventListener('click', (e) => {
            e.preventDefault();
            closeModal(loginModal);
            openModal(registerModal);
        });

        // AJAX form submission
        function handleFormAjax(form, messagesEl) {
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const action = form.action;
                const data = new FormData(form);
                
                // Clear previous messages
                messagesEl.innerHTML = '';
                
                // Disable submit button to prevent double submission
                const submitBtn = form.querySelector('button[type="submit"]');
                const originalBtnText = submitBtn.textContent;
                submitBtn.disabled = true;
                submitBtn.textContent = 'Processing...';

                fetch(action, {
                    method: 'POST',
                    body: data,
                    headers: { 'Accept': 'application/json' }
                })
                .then(r => {
                    const contentType = r.headers.get('content-type');
                    if (contentType && contentType.includes('application/json')) {
                        return r.json();
                    }
                    return null;
                })
                .then(json => {
                    if (json) {
                        if (json.success) {
                            // Show success message
                            messagesEl.innerHTML = '<div class="alert alert-success">' + escapeHtml(json.success) + '</div>';
                            
                            // Set login status for successful login/register
                            if (form.id === 'loginForm' || form.id === 'registerForm') {
                                localStorage.setItem('isLoggedIn', 'true');
                            }
                            
                            // Redirect after 2 seconds delay
                            const redirectUrl = json.redirect || 'index.php';
                            setTimeout(() => {
                                window.location.href = redirectUrl;
                            }, 2000);
                        } else if (json.errors && json.errors.length) {
                            // Show error messages - stay on overview page
                            messagesEl.innerHTML = '<div class="alert alert-danger">' + json.errors.map(x => escapeHtml(x)).join('<br>') + '</div>';
                            submitBtn.disabled = false;
                            submitBtn.textContent = originalBtnText;
                        } else if (json.error) {
                            // Show error message - stay on overview page
                            messagesEl.innerHTML = '<div class="alert alert-danger">' + escapeHtml(json.error) + '</div>';
                            submitBtn.disabled = false;
                            submitBtn.textContent = originalBtnText;
                        } else {
                            // Fallback to normal submit
                            submitBtn.disabled = false;
                            submitBtn.textContent = originalBtnText;
                            form.submit();
                        }
                    } else {
                        // No JSON response, fallback to normal submit
                        submitBtn.disabled = false;
                        submitBtn.textContent = originalBtnText;
                        form.submit();
                    }
                })
                .catch(err => {
                    console.error('AJAX submit failed, falling back to normal submit', err);
                    messagesEl.innerHTML = '<div class="alert alert-danger">An error occurred. Please try again.</div>';
                    submitBtn.disabled = false;
                    submitBtn.textContent = originalBtnText;
                });
            });
        }

        // Attach AJAX handlers
        handleFormAjax(document.getElementById('registerForm'), document.getElementById('registerMessages'));
        handleFormAjax(document.getElementById('loginForm'), document.getElementById('loginMessages'));

        // HTML escaping helper
        function escapeHtml(s) {
            return String(s).replace(/[&<>"']/g, function(m) { 
                return { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[m]; 
            });
        }

    </script>
</body>
</html>